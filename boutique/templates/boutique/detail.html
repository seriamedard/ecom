{% extends 'boutique/base.html' %}
{% load humanize %}
{% block title %}somae-{{un_produit.sous_categorie}}-{{un_produit.nom}}{% endblock %}

{% block salut%}
{% endblock%}

{% block newsletter %}
    {% include 'boutique/newsletter.html' %}
{%endblock%}

{%block search%}
    {% include 'boutique/recherche_form.html' %}
{%endblock%}
{% block cat %}
    {% include 'boutique/categorie.html' %}
{% endblock %}

{% block souscategorie %}
{% endblock %}
{% block carousel %}
{% endblock %}
{% block produit %}
{% endblock %}
{% block content%}
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="{% url 'boutique:accueil' %}">Accueil</a></li>
      <li class="breadcrumb-item"><a href="{% url 'boutique:boutique' %}">Produit</a></li>
      <li class="breadcrumb-item active" aria-current="page">{{un_produit.nom}}</li>
    </ol>
  </nav>
<div class="row">
    <div class="col-sm-12 col-lg-6 ">
        <img class="img-thumbnail" src="{{ un_produit.image.url }}" alt="{{un_produit.nom}}">
        <div class="my-2">
            {% if un_produit.etoile == 0 %}
                <p></p>
            {% elif un_produit.etoile == 1 %}
                <p class="d-inline-flex align-items-center">
                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-eye-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"/>
                        <path fill-rule="evenodd" d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"/>
                      </svg>
                      1 Vue
                </p>
            {% else %}
                <p class="d-inline-flex align-items-center">
                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-eye-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"/>
                        <path fill-rule="evenodd" d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"/>
                    </svg> 
                     {{un_produit.etoile|intword}} Vues
                </p>
            {% endif %}
        </div>
    </div>
    <div class="col-sm-12 col-lg-6">
        <div class="reduction d-inline-flex">
            <p style="width: 4rem;" class="bg-primary mr-5 p-1 text-white font-weight-bold">- {{un_produit.reduction|floatformat }}%</p>
            <div>
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-star-fill" fill="#ed6b5b" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.283.95l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                </svg>
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-star-fill" fill="#ed6b5b" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.283.95l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                </svg>
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-star-fill" fill="#ed6b5b" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.283.95l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                </svg>
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-star-fill" fill="#ed6b5b" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.283.95l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                </svg>
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-star-half" fill="#ed6b5b" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M5.354 5.119L7.538.792A.516.516 0 0 1 8 .5c.183 0 .366.097.465.292l2.184 4.327 4.898.696A.537.537 0 0 1 16 6.32a.55.55 0 0 1-.17.445l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256a.519.519 0 0 1-.146.05c-.341.06-.668-.254-.6-.642l.83-4.73L.173 6.765a.55.55 0 0 1-.171-.403.59.59 0 0 1 .084-.302.513.513 0 0 1 .37-.245l4.898-.696zM8 12.027c.08 0 .16.018.232.056l3.686 1.894-.694-3.957a.564.564 0 0 1 .163-.505l2.906-2.77-4.052-.576a.525.525 0 0 1-.393-.288L8.002 2.223 8 2.226v9.8z"/>
                </svg>
            </div>
            
        </div>
        <div class="titre">
            <h4 class="font_weight_bold">{{ un_produit.nom }}</h4>
        </div>
        <div class="prix d-inline-flex align-items-center">
            <h6 class="mr-4"><del>{{ un_produit.premier_prix|floatformat }}</del>  {{devise}}</h6>
            <h5><span class="text-primary">{{ un_produit.prix|floatformat }}</span>  {{devise}}</h5>
        </div>
        <div class="description">
            <div class="overflow-auto">
                <p>{{ un_produit.description|safe }}</p>
            </div>
            <hr>
        </div>
        <div class="dispo">
            {% if un_produit.disponible %}
            <p class="font-weight-bold">Disponible: <span class="font-italic font-weight-light">En stock</span></p>
            {% else %}
            <p class="font-weight-bold">Disponible: <span class="font-italic">Non</span></p>
            {% endif %}
        </div>
        <form class=" d-inline-flex" action="{% url 'boutique:ajout_au_panier' %}" method="POST">
            {% csrf_token %}
            <div class="form-group">
                <label for="selectquantite">Qt√©: </label>
                <input type="number"  class="form-control" id="selectquantite" style="width: 5rem;" min="1" max="{{un_produit.quantite|add:5}}" value="1" name="qte">
                <input type="hidden" class="hidden" value="{{ un_produit.id }}" name="id">
                <div class="d-flex-inline">
                    <button type="submit" class="btn btn-outline-primary my-2">Ajouter au panier</button>
                    <a  href="{% url 'boutique:achat' id_produit=un_produit.id %}" type="" class="btn btn-outline-primary my-2">Acheter</a>
                </div>
                
            </div>
        </form>

    </div>
</div>
<div class="row my-4">
    {% for media in un_produit.media.all %}
    <div class="col-12 col-md-3 col-lg-4 d-flex align-self-center">
        <div class="card p-1 mb-1">
            <img class="img-thumbnail" src="{{ media.image.url }}" alt="{{media.nom}}">
        </div>
    </div>
    {% endfor %}
</div>
{% endblock%}